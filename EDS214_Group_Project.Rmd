---
title: "EDS 214 Group Project"
output: html_document
date: "2022-08-24"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(here)
```

```{r, message = FALSE, warning = FALSE}
#read in raw data 
PRM <- read_csv(here('/courses/EDS214/gg_girls/raw_data','RioMameyesPuenteRoto.csv'))
BQ1 <- read_csv(here('/courses/EDS214/gg_girls/raw_data', 'QuebradaCuenca1-Bisley.csv'))
BQ2 <- read_csv(here('/courses/EDS214/gg_girls/raw_data', 'QuebradaCuenca2-Bisley.csv'))
BQ3 <- read_csv(here('/courses/EDS214/gg_girls/raw_data', 'QuebradaCuenca2-Bisley.csv'))
```

```{r}
#data cleaning 
PRM_clean <- PRM %>% 
  select(Sample_Date, `NO3-N`, K, `NH4-N`, Sample_ID)
BQ1_clean <- BQ1 %>% 
  select(Sample_Date, `NO3-N`, K, `NH4-N`, Sample_ID)
BQ2_clean <- BQ2 %>% 
  select(Sample_Date, `NO3-N`, K, `NH4-N`, Sample_ID)
BQ3_clean <- BQ3 %>% 
  select(Sample_Date, `NO3-N`, K, `NH4-N`, Sample_ID)|>
  mutate(Sample_ID = "Q3")
  
```

```{r}
#joining cleaned data
Joined <- bind_rows(BQ1_clean, BQ2_clean, BQ3_clean, PRM_clean)
```

```{r}
#summarizing variables by monthly averages 
Joined_week <- lubridate::week(Joined$Sample_Date)
Joined_yr <- lubridate::year(Joined$Sample_Date)
Joined_mnth <- lubridate::month
Joined <- Joined %>% 
  mutate(Week = Joined_week, Year = Joined_yr) %>% 
  group_by(Sample_ID, Year, Week) %>% 
  summarize(MeanK = mean(K, na.rm=TRUE))
```

```{r}
#create a ggplot
joined <- Joined %>% 
  filter(Year > 1988, Year < 1993)
joined

ggplot(data=joined, aes(x=Week, y=MeanK, color=Sample_ID)) + geom_line()
```


